<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediScan - AI Health Symptom Checker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: white;
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-size: 1.2em;
        }

        .status-badge {
            display: inline-block;
            background: rgba(81, 207, 102, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-section h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .input-wrapper {
            position: relative;
            margin-bottom: 20px;
        }

        #symptomInput {
            width: 100%;
            padding: 18px 50px 18px 20px;
            font-size: 1.1em;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            outline: none;
        }

        #symptomInput:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
            background: white;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            margin-top: 5px;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 100;
        }

        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid #f0f0f0;
        }

        .suggestion-item:hover {
            background: #667eea;
            color: white;
        }

        .add-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .add-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .symptoms-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
            min-height: 50px;
        }

        .symptom-chip {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: chipIn 0.3s ease-out;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        @keyframes chipIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .symptom-chip span {
            color: #333;
            font-weight: 500;
        }

        .remove-chip {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .remove-chip:hover {
            transform: scale(1.2);
        }

        .analyze-btn {
            width: 100%;
            padding: 18px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: white;
            font-size: 1.2em;
        }

        .results {
            display: none;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            animation: fadeInUp 0.5s ease-out;
            border-left: 5px solid #667eea;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .disease-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .confidence {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .severity {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .severity-low { background: #51cf66; color: white; }
        .severity-medium { background: #ffd43b; color: #333; }
        .severity-high { background: #ff6b6b; color: white; }

        .description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .advice-section {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .advice-section h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .advice-section ul {
            list-style: none;
            padding-left: 0;
        }

        .advice-section li {
            color: #333;
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
        }

        .advice-section li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #51cf66;
            font-weight: bold;
        }

        .map-section {
            margin-top: 30px;
        }

        .map-section h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .health-centers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .center-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .center-card:hover {
            transform: translateY(-5px);
        }

        .center-name {
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
            margin-bottom: 10px;
        }

        .center-info {
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .center-info i {
            color: #667eea;
        }

        .disclaimer {
            background: rgba(255, 107, 107, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            color: white;
            text-align: center;
        }

        .disclaimer i {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            color: white;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .glass-card { padding: 25px; }
            .health-centers { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-animation" id="bgAnimation"></div>

    <div class="container">
        <header>
            <h1><i class="fas fa-heartbeat"></i> MediScan</h1>
            <p class="subtitle">AI-Powered Health Symptom Analysis</p>
            <div style="text-align: center;">
                <span class="status-badge" id="statusBadge">
                    <i class="fas fa-circle-notch fa-spin"></i> Loading Database...
                </span>
            </div>
            <div class="stats-bar" id="statsBar" style="display: none;">
                <div class="stat-item">
                    <span class="stat-number" id="diseaseCount">0</span>
                    <span class="stat-label">Diseases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="symptomCount">0</span>
                    <span class="stat-label">Symptoms</span>
                </div>
            </div>
        </header>

        <div class="glass-card">
            <div class="input-section">
                <h2><i class="fas fa-stethoscope"></i> Enter Your Symptoms</h2>
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="symptomInput" 
                        placeholder="Type a symptom (e.g., fever, headache, cough)..."
                        autocomplete="off"
                    >
                    <div class="suggestions" id="suggestions"></div>
                    <button class="add-btn" onclick="addSymptom()">
                        <i class="fas fa-plus"></i> Add
                    </button>
                </div>
                <div class="symptoms-container" id="symptomsContainer"></div>
                <button class="analyze-btn" onclick="analyzeSymptoms()" id="analyzeBtn" disabled>
                    <i class="fas fa-search"></i> Analyze Symptoms
                </button>
            </div>
        </div>

        <div class="glass-card loading" id="loading">
            <div class="spinner"></div>
            <p>Analyzing your symptoms...</p>
        </div>

        <div class="results" id="results">
            <div class="glass-card">
                <h2 style="color: white; margin-bottom: 25px;">
                    <i class="fas fa-clipboard-list"></i> Analysis Results
                </h2>
                <div id="resultsContainer"></div>
            </div>

            <div class="glass-card map-section">
                <h3><i class="fas fa-hospital"></i> Nearby Health Centers</h3>
                <div class="health-centers" id="healthCenters"></div>
            </div>
        </div>

        <div class="disclaimer">
            <i class="fas fa-exclamation-triangle"></i>
            <p><strong>Medical Disclaimer:</strong> This tool provides general information only and should not replace professional medical advice. Always consult with a qualified healthcare provider for accurate diagnosis and treatment.</p>
        </div>
    </div>

    <script>
        // Disease database (loaded from CSV or hardcoded)
        let diseaseDatabase = {};
        let allSymptoms = new Set();
        let userSymptoms = [];

        // Initialize app
        async function initializeApp() {
            // Comprehensive disease database
            diseaseDatabase = {
                "Fungal infection": {
                    symptoms: ["itching", "skin rash", "nodal skin eruptions", "dischromic patches"],
                    description: "A fungal infection occurs when fungi invade and overgrow on the skin, causing various skin conditions.",
                    precautions: ["Bath twice daily", "Use antifungal powder", "Keep affected area dry", "Wear loose cotton clothes"]
                },
                "Allergy": {
                    symptoms: ["continuous sneezing", "shivering", "chills", "watering from eyes"],
                    description: "An allergic reaction occurs when your immune system reacts to a foreign substance.",
                    precautions: ["Apply calamine lotion", "Cover area with bandage", "Use ice to reduce itching", "Consult doctor if severe"]
                },
                "GERD": {
                    symptoms: ["stomach pain", "acidity", "ulcers on tongue", "vomiting", "cough", "chest pain"],
                    description: "Gastroesophageal reflux disease (GERD) is a chronic digestive condition where stomach acid flows back into the esophagus.",
                    precautions: ["Avoid fatty spicy food", "Avoid lying down after eating", "Maintain healthy weight", "Exercise regularly"]
                },
                "Chronic cholestasis": {
                    symptoms: ["itching", "vomiting", "yellowish skin", "nausea", "loss of appetite", "abdominal pain"],
                    description: "A condition where bile flow from the liver is reduced or stopped, leading to bile accumulation.",
                    precautions: ["Cold bath for itching", "Drink plenty of water", "Eat vitamin K rich food", "Consult doctor immediately"]
                },
                "Drug Reaction": {
                    symptoms: ["itching", "skin rash", "stomach pain", "burning micturition", "spotting urination"],
                    description: "An adverse drug reaction is an unwanted or harmful reaction after taking medication.",
                    precautions: ["Stop irritation medication", "Consult nearest hospital", "Stop taking drug", "Follow up with doctor"]
                },
                "Peptic ulcer disease": {
                    symptoms: ["vomiting", "loss of appetite", "abdominal pain", "passage of gases", "internal itching"],
                    description: "Open sores that develop on the inside lining of your stomach and the upper portion of your small intestine.",
                    precautions: ["Avoid fatty spicy food", "Consume probiotic food", "Eliminate stress", "Limit alcohol intake"]
                },
                "AIDS": {
                    symptoms: ["muscle wasting", "patches in throat", "high fever", "extra marital contacts"],
                    description: "Acquired immunodeficiency syndrome (AIDS) is a chronic, potentially life-threatening condition caused by HIV.",
                    precautions: ["Avoid open cuts", "Wear PPE if possible", "Consult doctor immediately", "Follow safe practices"]
                },
                "Diabetes": {
                    symptoms: ["fatigue", "weight loss", "restlessness", "lethargy", "irregular sugar level", "blurred vision", "increased appetite", "polyuria"],
                    description: "A chronic disease that affects how your body turns food into energy, characterized by high blood sugar levels.",
                    precautions: ["Have balanced diet", "Exercise regularly", "Consult doctor frequently", "Monitor blood sugar levels"]
                },
                "Gastroenteritis": {
                    symptoms: ["vomiting", "sunken eyes", "dehydration", "diarrhea"],
                    description: "An intestinal infection marked by diarrhea, cramps, nausea, vomiting and fever.",
                    precautions: ["Stop eating solid food for a while", "Try taking small sips of water", "Rest adequately", "Ease back into eating"]
                },
                "Bronchial Asthma": {
                    symptoms: ["fatigue", "cough", "high fever", "breathlessness", "family history", "mucoid sputum"],
                    description: "A condition in which your airways narrow and swell and may produce extra mucus, making breathing difficult.",
                    precautions: ["Switch to loose clothing", "Take deep breaths", "Get away from trigger", "Seek immediate medical help"]
                },
                "Hypertension": {
                    symptoms: ["headache", "chest pain", "dizziness", "loss of balance", "lack of concentration"],
                    description: "High blood pressure is a common condition where the force of blood against artery walls is too high.",
                    precautions: ["Meditation helps", "Reduce salt intake", "Exercise regularly", "Maintain healthy weight"]
                },
                "Migraine": {
                    symptoms: ["acidity", "indigestion", "headache", "blurred vision", "excessive hunger", "stiff neck", "depression", "visual disturbances"],
                    description: "A neurological condition characterized by intense, debilitating headaches often accompanied by nausea and sensitivity to light.",
                    precautions: ["Meditate daily", "Reduce screen time", "Stay in quiet, dark room", "Avoid trigger foods"]
                },
                "Cervical spondylosis": {
                    symptoms: ["back pain", "weakness in limbs", "neck pain", "dizziness", "loss of balance"],
                    description: "Age-related wear and tear affecting the spinal disks in your neck, causing neck pain and stiffness.",
                    precautions: ["Use heating pad or cold pack", "Exercise regularly", "Maintain proper posture", "Get physical therapy"]
                },
                "Paralysis (brain hemorrhage)": {
                    symptoms: ["vomiting", "headache", "weakness of one body side", "altered sensorium"],
                    description: "Loss of muscle function in part of your body, often caused by bleeding in or around the brain.",
                    precautions: ["Massage affected area", "Get plenty of rest", "Exercise regularly", "Consult doctor immediately"]
                },
                "Jaundice": {
                    symptoms: ["itching", "vomiting", "fatigue", "weight loss", "high fever", "yellowish skin", "dark urine", "abdominal pain"],
                    description: "A condition where skin and whites of the eyes turn yellow due to high bilirubin levels.",
                    precautions: ["Drink plenty of water", "Consume milk thistle", "Eat high fiber diet", "Avoid alcohol"]
                },
                "Malaria": {
                    symptoms: ["chills", "vomiting", "high fever", "sweating", "headache", "nausea", "diarrhea", "muscle pain"],
                    description: "A life-threatening disease caused by parasites transmitted through mosquito bites.",
                    precautions: ["Consult nearest hospital", "Avoid oily food", "Drink plenty of fluids", "Take proper medication"]
                },
                "Chicken pox": {
                    symptoms: ["itching", "skin rash", "fatigue", "lethargy", "high fever", "headache", "loss of appetite", "mild fever"],
                    description: "A highly contagious viral infection causing an itchy, blister-like rash on the skin.",
                    precautions: ["Use neem leaves in bathing", "Consume neem leaves", "Apply calamine lotion", "Keep fever in check"]
                },
                "Dengue": {
                    symptoms: ["skin rash", "chills", "joint pain", "vomiting", "fatigue", "high fever", "headache", "nausea", "loss of appetite", "pain behind eyes", "back pain", "muscle pain", "red spots over body"],
                    description: "A mosquito-borne viral infection causing flu-like illness and potentially lethal complications.",
                    precautions: ["Drink plenty of water", "Take proper rest", "Eat papaya leaves", "Seek immediate medical attention"]
                },
                "Typhoid": {
                    symptoms: ["chills", "vomiting", "fatigue", "high fever", "headache", "nausea", "constipation", "abdominal pain", "diarrhea", "toxic look", "belly pain"],
                    description: "A bacterial infection that can lead to high fever, diarrhea, and vomiting, caused by contaminated food or water.",
                    precautions: ["Eat high calorie diet", "Drink plenty of fluids", "Maintain good hygiene", "Take prescribed antibiotics"]
                },
                "Hepatitis A": {
                    symptoms: ["joint pain", "vomiting", "yellowish skin", "dark urine", "nausea", "loss of appetite", "abdominal pain", "diarrhea", "mild fever", "yellowing of eyes", "muscle pain"],
                    description: "A highly contagious liver infection caused by the hepatitis A virus, usually contracted from contaminated food or water.",
                    precautions: ["Consult nearest hospital", "Wash hands thoroughly", "Avoid fatty foods", "Medication as prescribed"]
                },
                "Hepatitis B": {
                    symptoms: ["itching", "fatigue", "lethargy", "yellowish skin", "dark urine", "loss of appetite", "abdominal pain", "yellow urine", "yellowing of eyes", "malaise", "receiving blood transfusion", "receiving unsterile injections"],
                    description: "A serious liver infection caused by the hepatitis B virus that can become chronic and lead to liver failure.",
                    precautions: ["Consult nearest hospital", "Vaccination is key", "Avoid alcohol", "Rest adequately"]
                },
                "Hepatitis C": {
                    symptoms: ["fatigue", "yellowish skin", "nausea", "loss of appetite", "yellowing of eyes", "family history"],
                    description: "A viral infection causing liver inflammation, sometimes leading to serious liver damage.",
                    precautions: ["Consult nearest hospital", "Vaccination", "Eat healthy", "Avoid alcohol"]
                },
                "Hepatitis D": {
                    symptoms: ["joint pain", "vomiting", "fatigue", "high fever", "yellowish skin", "dark urine", "nausea", "loss of appetite", "abdominal pain", "yellowing of eyes"],
                    description: "A liver infection caused by the hepatitis D virus, which only occurs in people infected with hepatitis B.",
                    precautions: ["Consult doctor", "Medication as prescribed", "Eat healthy", "Rest well"]
                },
                "Hepatitis E": {
                    symptoms: ["joint pain", "vomiting", "fatigue", "high fever", "yellowish skin", "dark urine", "nausea", "loss of appetite", "abdominal pain", "yellowing of eyes", "acute liver failure", "coma", "stomach bleeding"],
                    description: "A liver disease caused by the hepatitis E virus, usually spread through contaminated water.",
                    precautions: ["Stop alcohol consumption", "Rest adequately", "Drink plenty of water", "Consult nearest hospital"]
                },
                "Alcoholic hepatitis": {
                    symptoms: ["vomiting", "yellowish skin", "abdominal pain", "swelling of stomach", "distention of abdomen", "history of alcohol consumption", "fluid overload"],
                    description: "Liver inflammation caused by drinking too much alcohol, potentially leading to liver damage.",
                    precautions: ["Stop alcohol consumption", "Consult doctor", "Healthy diet", "Medication as advised"]
                },
                "Tuberculosis": {
                    symptoms: ["chills", "vomiting", "fatigue", "weight loss", "cough", "high fever", "breathlessness", "sweating", "loss of appetite", "mild fever", "yellowing of eyes", "swelled lymph nodes", "malaise", "phlegm", "chest pain", "blood in sputum"],
                    description: "A potentially serious infectious disease that mainly affects the lungs, spread through the air.",
                    precautions: ["Cover mouth when coughing", "Consult doctor", "Medication for 6-9 months", "Avoid close contact"]
                },
                "Common Cold": {
                    symptoms: ["continuous sneezing", "chills", "fatigue", "cough", "high fever", "headache", "swelled lymph nodes", "malaise", "phlegm", "throat irritation", "redness of eyes", "sinus pressure", "runny nose", "congestion", "chest pain", "loss of smell", "muscle pain"],
                    description: "A viral infection of your upper respiratory tract, typically harmless but uncomfortable.",
                    precautions: ["Drink plenty of fluids", "Get adequate rest", "Gargle with warm salt water", "Take vitamin C"]
                },
                "Pneumonia": {
                    symptoms: ["chills", "fatigue", "cough", "high fever", "breathlessness", "sweating", "malaise", "phlegm", "chest pain", "fast heart rate", "rusty sputum"],
                    description: "An infection that inflames air sacs in one or both lungs, which may fill with fluid.",
                    precautions: ["Consult doctor", "Medication as prescribed", "Rest adequately", "Avoid smoking"]
                },
                "Dimorphic hemorrhoids (piles)": {
                    symptoms: ["constipation", "pain during bowel movements", "pain in anal region", "bloody stool", "irritation in anus"],
                    description: "Swollen veins in the lowest part of the rectum and anus, causing discomfort and bleeding.",
                    precautions: ["Avoid fatty spicy food", "Consume more fiber", "Drink plenty of water", "Exercise regularly"]
                },
                "Heart attack": {
                    symptoms: ["vomiting", "breathlessness", "sweating", "chest pain"],
                    description: "A medical emergency where blood flow to the heart is blocked, potentially damaging heart muscle.",
                    precautions: ["Call ambulance immediately", "Chew aspirin if available", "Rest and stay calm", "Avoid physical exertion"]
                },
                "Varicose veins": {
                    symptoms: ["fatigue", "cramps", "bruising", "obesity", "swollen legs", "swollen blood vessels", "prominent veins on calf"],
                    description: "Enlarged, twisted veins that can be seen just under the surface of the skin, usually in the legs.",
                    precautions: ["Lie down flat and raise legs", "Use compression stockings", "Exercise regularly", "Avoid standing for long periods"]
                },
                "Hypothyroidism": {
                    symptoms: ["fatigue", "weight gain", "cold hands and feet", "mood swings", "lethargy", "dizziness", "puffy face and eyes", "enlarged thyroid", "brittle nails", "swollen extremities", "depression", "irritability", "abnormal menstruation"],
                    description: "A condition where the thyroid gland doesn't produce enough thyroid hormones, slowing metabolism.",
                    precautions: ["Reduce stress", "Exercise regularly", "Eat healthy diet", "Take thyroid medication as prescribed"]
                },
                "Hyperthyroidism": {
                    symptoms: ["fatigue", "mood swings", "weight loss", "restlessness", "sweating", "diarrhea", "fast heart rate", "excessive hunger", "muscle weakness", "irritability", "enlarged thyroid", "swollen extremities", "abnormal menstruation"],
                    description: "A condition where the thyroid gland produces too much thyroid hormone, speeding up metabolism.",
                    precautions: ["Eat healthy", "Massage affected area", "Medication as prescribed", "Radioactive iodine treatment if needed"]
                },
                "Hypoglycemia": {
                    symptoms: ["vomiting", "fatigue", "anxiety", "sweating", "headache", "nausea", "blurred vision", "fast heart rate", "slurred speech", "palpitations"],
                    description: "A condition characterized by abnormally low blood sugar levels, common in diabetes treatment.",
                    precautions: ["Consume sugar or candy immediately", "Drink fruit juice", "Eat regular meals", "Monitor blood sugar levels"]
                },
                "Osteoarthritis": {
                    symptoms: ["joint pain", "neck pain", "knee pain", "hip joint pain", "swelling joints", "painful walking"],
                    description: "The most common form of arthritis, occurring when protective cartilage cushioning bones wears down over time.",
                    precautions: ["Massage affected area", "Exercise regularly", "Use hot and cold therapy", "Maintain healthy weight"]
                },
                "Arthritis": {
                    symptoms: ["muscle weakness", "stiff neck", "swelling joints", "movement stiffness", "painful walking"],
                    description: "Inflammation of one or more joints, causing pain and stiffness that worsens with age.",
                    precautions: ["Exercise regularly", "Use hot and cold therapy", "Maintain healthy weight", "Medication as prescribed"]
                },
                "(vertigo) Paroxysmal Positional Vertigo": {
                    symptoms: ["vomiting", "headache", "nausea", "spinning movements", "loss of balance", "unsteadiness"],
                    description: "A condition causing brief episodes of mild to intense dizziness, triggered by changes in head position.",
                    precautions: ["Lie down in quiet room", "Avoid sudden movements", "Stay hydrated", "Consult doctor"]
                },
                "Acne": {
                    symptoms: ["skin rash", "pus filled pimples", "blackheads", "scurring"],
                    description: "A skin condition occurring when hair follicles become plugged with oil and dead skin cells.",
                    precautions: ["Bath twice daily", "Avoid fatty foods", "Drink plenty of water", "Use oil-free cosmetics"]
                },
                "Urinary tract infection": {
                    symptoms: ["burning micturition", "spotting urination", "foul smell of urine", "continuous feel of urine"],
                    description: "An infection in any part of the urinary system, most commonly affecting the bladder and urethra.",
                    precautions: ["Drink plenty of water", "Increase vitamin C intake", "Urinate frequently", "Maintain good hygiene"]
                },
                "Psoriasis": {
                    symptoms: ["skin rash", "joint pain", "skin peeling", "silver like dusting", "small dents in nails", "inflammatory nails"],
                    description: "A skin disease causing red, itchy scaly patches, most commonly on knees, elbows, trunk and scalp.",
                    precautions: ["Wash hands with warm water", "Stop bleeding if any", "Consult dermatologist", "Use prescribed ointments"]
                },
                "Impetigo": {
                    symptoms: ["skin rash", "high fever", "blister", "red sore around nose", "yellow crust ooze"],
                    description: "A highly contagious bacterial skin infection causing red sores that can break open and ooze fluid.",
                    precautions: ["Soak affected area in warm water", "Use antibiotics", "Remove scabs gently", "Consult doctor"]
                }
            };

            // Extract all unique symptoms
            Object.values(diseaseDatabase).forEach(disease => {
                disease.symptoms.forEach(symptom => {
                    allSymptoms.add(symptom.toLowerCase());
                });
            });

            // Update UI
            document.getElementById('statusBadge').innerHTML = '<i class="fas fa-check-circle"></i> Database Ready';
            document.getElementById('statusBadge').style.background = 'rgba(81, 207, 102, 0.3)';
            document.getElementById('diseaseCount').textContent = Object.keys(diseaseDatabase).length;
            document.getElementById('symptomCount').textContent = allSymptoms.size;
            document.getElementById('statsBar').style.display = 'flex';
            document.getElementById('analyzeBtn').disabled = false;

            console.log(`✓ Loaded ${Object.keys(diseaseDatabase).length} diseases with ${allSymptoms.size} unique symptoms`);
        }

        // Create animated background particles
        function createParticles() {
            const bgAnimation = document.getElementById('bgAnimation');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                bgAnimation.appendChild(particle);
            }
        }

        // Auto-complete suggestions
        document.getElementById('symptomInput').addEventListener('input', function(e) {
            const input = e.target.value.toLowerCase().trim();
            const suggestionsDiv = document.getElementById('suggestions');

            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }

            const matches = Array.from(allSymptoms).filter(symptom => 
                symptom.includes(input) && !userSymptoms.includes(symptom)
            ).slice(0, 8);

            if (matches.length > 0) {
                suggestionsDiv.innerHTML = matches.map(symptom => 
                    `<div class="suggestion-item" onclick="selectSuggestion('${symptom}')">${symptom}</div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        });

        // Close suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.input-wrapper')) {
                document.getElementById('suggestions').style.display = 'none';
            }
        });

        // Select suggestion
        function selectSuggestion(symptom) {
            document.getElementById('symptomInput').value = symptom;
            document.getElementById('suggestions').style.display = 'none';
            addSymptom();
        }

        // Add symptom
        function addSymptom() {
            const input = document.getElementById('symptomInput');
            const symptom = input.value.trim().toLowerCase();
            
            if (symptom && !userSymptoms.includes(symptom)) {
                userSymptoms.push(symptom);
                updateSymptomsDisplay();
                input.value = '';
                document.getElementById('suggestions').style.display = 'none';
            }
        }

        // Remove symptom
        function removeSymptom(symptom) {
            userSymptoms = userSymptoms.filter(s => s !== symptom);
            updateSymptomsDisplay();
        }

        // Update symptoms display
        function updateSymptomsDisplay() {
            const container = document.getElementById('symptomsContainer');
            container.innerHTML = '';
            
            userSymptoms.forEach(symptom => {
                const chip = document.createElement('div');
                chip.className = 'symptom-chip';
                chip.innerHTML = `
                    <span>${symptom}</span>
                    <button class="remove-chip" onclick="removeSymptom('${symptom}')">×</button>
                `;
                container.appendChild(chip);
            });
        }

        // Enter key support
        document.getElementById('symptomInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addSymptom();
            }
        });

        // Calculate match score with advanced algorithm
        function calculateMatchScore(userSymps, diseaseSymps) {
            const userSet = new Set(userSymps.map(s => s.toLowerCase()));
            const diseaseSet = new Set(diseaseSymps.map(s => s.toLowerCase()));
            
            let directMatches = 0;
            let partialMatches = 0;

            userSet.forEach(userSymp => {
                if (diseaseSet.has(userSymp)) {
                    directMatches++;
                } else {
                    // Check for partial matches
                    diseaseSet.forEach(diseaseSymp => {
                        if (userSymp.includes(diseaseSymp) || diseaseSymp.includes(userSymp)) {
                            partialMatches += 0.5;
                        }
                    });
                }
            });

            if (diseaseSet.size === 0) return 0;

            const totalMatch = directMatches + partialMatches;
            let score = (totalMatch / diseaseSet.size) * 100;

            // Boost for multiple direct matches
            if (directMatches >= 4) score = Math.min(score * 1.4, 100);
            else if (directMatches >= 3) score = Math.min(score * 1.3, 100);
            else if (directMatches >= 2) score = Math.min(score * 1.15, 100);

            // Penalty for very few matches
            if (directMatches === 0 && partialMatches < 1) score *= 0.5;

            return Math.round(score);
        }

        // Determine severity based on disease
        function getSeverity(diseaseName) {
            const highSeverity = ['heart attack', 'paralysis', 'aids', 'hepatitis', 'tuberculosis', 'pneumonia'];
            const lowSeverity = ['common cold', 'acne', 'allergy', 'fungal infection'];
            
            const nameLower = diseaseName.toLowerCase();
            if (highSeverity.some(d => nameLower.includes(d))) return 'High';
            if (lowSeverity.some(d => nameLower.includes(d))) return 'Low';
            return 'Medium';
        }

        // Analyze symptoms
        async function analyzeSymptoms() {
            if (userSymptoms.length === 0) {
                alert('⚠️ Please add at least one symptom');
                return;
            }

            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';

            // Simulate processing time for better UX
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Calculate matches
            const matches = [];
            
            Object.entries(diseaseDatabase).forEach(([disease, info]) => {
                const score = calculateMatchScore(userSymptoms, info.symptoms);
                
                if (score > 15) {
                    matches.push({
                        disease: disease,
                        confidence: score,
                        description: info.description,
                        severity: getSeverity(disease),
                        advice: info.precautions
                    });
                }
            });

            // Sort by confidence
            matches.sort((a, b) => b.confidence - a.confidence);

            // Get top matches
            let topMatches = matches.slice(0, 5);

            // If no matches found
            if (topMatches.length === 0) {
                topMatches = [{
                    disease: "Unable to Determine Specific Condition",
                    confidence: 0,
                    description: "Your symptoms don't clearly match specific conditions in our database. This could mean your condition is rare, or you may need professional evaluation to identify the cause.",
                    severity: "Medium",
                    advice: [
                        "Schedule an appointment with a healthcare professional",
                        "Keep a detailed log of all symptoms and when they occur",
                        "Note any triggers or patterns you notice",
                        "Monitor for any worsening or new symptoms",
                        "Don't hesitate to seek emergency care if symptoms become severe"
                    ]
                }];
            }

            // Hide loading
            document.getElementById('loading').style.display = 'none';

            // Display results
            displayResults(topMatches);
        }

        // Display results
        function displayResults(predictions) {
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = '';

            predictions.forEach((pred, index) => {
                const severityClass = pred.severity === 'High' ? 'severity-high' : 
                                     pred.severity === 'Medium' ? 'severity-medium' : 'severity-low';
                
                const card = document.createElement('div');
                card.className = 'result-card';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <div class="result-header">
                        <div class="disease-name">
                            ${index === 0 ? ' ' : ''}${pred.disease}
                        </div>
                        <div class="confidence">${pred.confidence}% Match</div>
                    </div>
                    <div class="severity ${severityClass}">
                        <i class="fas fa-exclamation-circle"></i> ${pred.severity} Priority
                    </div>
                    <div class="description">${pred.description}</div>
                    <div class="advice-section">
                        <h4><i class="fas fa-lightbulb"></i> Recommended Actions</h4>
                        <ul>
                            ${pred.advice.map(a => `<li>${a}</li>`).join('')}
                        </ul>
                    </div>
                `;
                resultsContainer.appendChild(card);
            });

            // Display health centers
            displayHealthCenters();

            // Show results and scroll
            document.getElementById('results').style.display = 'block';
            setTimeout(() => {
                document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // Generate health centers
        function displayHealthCenters() {
            const centers = [
                {
                    name: "Harare Central Hospital",
                    address: "Southerton, Harare, Zimbabwe",
                    phone: "+263 4 251 611",
                    distance: (Math.random() * 3 + 0.5).toFixed(1)
                },
                {
                    name: "Parirenyatwa Group of Hospitals",
                    address: "Mazowe Street, Harare",
                    phone: "+263 4 703 631",
                    distance: (Math.random() * 4 + 1).toFixed(1)
                },
                {
                    name: "Avenues Clinic",
                    address: "Baines Avenue, Harare",
                    phone: "+263 4 252 555",
                    distance: (Math.random() * 5 + 0.8).toFixed(1)
                },
                {
                    name: "Trauma Centre",
                    address: "Enterprise Road, Harare",
                    phone: "+263 4 621 555",
                    distance: (Math.random() * 6 + 1.5).toFixed(1)
                },
                {
                    name: "Borrowdale Trauma Centre",
                    address: "Borrowdale Road, Harare",
                    phone: "+263 4 885 888",
                    distance: (Math.random() * 7 + 2).toFixed(1)
                }
            ];

            // Sort by distance
            centers.sort((a, b) => parseFloat(a.distance) - parseFloat(b.distance));

            const container = document.getElementById('healthCenters');
            container.innerHTML = '';

            centers.slice(0, 4).forEach(center => {
                const card = document.createElement('div');
                card.className = 'center-card';
                card.innerHTML = `
                    <div class="center-name">
                        <i class="fas fa-hospital"></i> ${center.name}
                    </div>
                    <div class="center-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${center.address}</span>
                    </div>
                    <div class="center-info">
                        <i class="fas fa-phone"></i>
                        <span>${center.phone}</span>
                    </div>
                    <div class="center-info">
                        <i class="fas fa-car"></i>
                        <span>${center.distance} km away</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Initialize app on load
        window.addEventListener('load', function() {
            createParticles();
            initializeApp();
        });
    </script>
</body>
</html>